!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","react","prop-types"],t):t(e.ReactNumWheel={},e.React,e.PropTypes)}(this,function(e,r,t){"use strict";var i="default"in r?r.default:r;function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}t=t&&t.hasOwnProperty("default")?t.default:t;p("");var m=".number {\n  position: relative;\n  overflow: hidden;\n  display: inline-block;\n  width: 5.333vw;\n  height: 5.333vw;\n}\n.number ul {\n  overflow: hidden;\n  -webkit-transition: -webkit-transform;\n  transition: -webkit-transform;\n  -o-transition: -o-transform;\n  transition: transform;\n  transition: transform, -webkit-transform, -o-transform;\n  position: absolute;\n  will-change: transform;\n  left: 0;\n  margin: 0;\n  z-index: 100;\n  top: 0;\n  padding: 0;\n}\n.number ul li {\n  width: 5.333vw;\n  height: 5.333vw;\n  display: block;\n  text-align: center;\n}\n.number ul li:before {\n  content: '';\n  display: inline-block;\n  vertical-align: middle;\n  width: 0;\n  height: 100%;\n  margin-top: 1px;\n}\n.number ul li span {\n  display: inline-block;\n  list-style: none;\n  vertical-align: middle;\n}\n";p(m);var d=function(e){function n(e){var t;return o(this,n),(t=f(this,c(n).call(this,e))).arr=t.props.counterArr||[0,1,2,3,4,5,6,7,8,9],t.counterArr=t.arr.concat(t.arr),t.counterLen=t.counterArr.length,t.counterNum=t.arr.length/t.counterLen,t.lastNumber=0,t.lastPercent=0,t.second=t.props.animation||.3,t}return l(n,r.Component),s(n,[{key:"componentDidMount",value:function(){this.listenerTrasition()}},{key:"componentWillReceiveProps",value:function(e){this.setState(u({},e))}},{key:"listenerTrasition",value:function(){var e=this,t=this.whichTransitionEvent();t&&this.refs.counter.addEventListener(t,function(){e.lastPercent>-e.counterNum||(e.lastPercent=e.lastPercent+.5,e.refs.counter.style.transition="0s",e.refs.counter.style.transform="translateY(".concat(100*e.lastPercent,"%) translate3d(0, 0, 0)"))})}},{key:"componentWillUnmount",value:function(){var e=this.whichTransitionEvent();this.refs.counter.removeEventListener(e,function(){console.log("移除动画监听事件")})}},{key:"whichTransitionEvent",value:function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",animationstart:"animationend",webkitAnimationStart:"webkitAnimationEnd",MSAnimationStart:"MSAnimationEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}},{key:"renderSingle",value:function(e,t){return i.createElement("li",{key:t},i.createElement("span",null,e))}},{key:"formatNumberToPercent",value:function(e){var t=0;return"number"!=typeof(e=Number(e))||e!=e||e<0||9<e||(t=e>this.lastNumber?-e/this.counterLen:-e/this.counterLen-this.counterNum,this.lastNumber=e),t}},{key:"shouldComponentUpdate",value:function(e,t){return e.value!==this.props.value}},{key:"render",value:function(){var n=this,e=this.props.value,t=this.counterArr,r=this.lastPercent;return this.lastPercent=this.formatNumberToPercent(e)||r,this.refs.counter&&(this.refs.counter.style.transition=this.second+"s"),i.createElement("div",{className:m.number},i.createElement("ul",{ref:"counter",style:{transform:"translateY(".concat(100*this.lastPercent,"%) translate3d(0, 0, 0)"),transition:"".concat(this.second,"s")}},t.map(function(e,t){return n.renderSingle(e,t)})))}}]),n}(),h=function(e){function t(){return o(this,t),f(this,c(t).apply(this,arguments))}return l(t,r.Component),s(t,[{key:"separateData",value:function(e){var t=this.props.separate;return e&&e.toString().replace(/^\d+/g,function(e){return e.replace(/(?=(?!^)(\d{3})+$)/g,t)})}},{key:"componentWillReceiveProps",value:function(e){this.setState(u({},e))}},{key:"renderSeparator",value:function(e){return i.createElement("span",{key:e},",")}},{key:"render",value:function(){var n=this,e=this.props.value,t=[];return t=((e=this.separateData(e))+"").split(""),i.createElement("div",{className:"".numberWheel},t.map(function(e,t){return","===e?n.renderSeparator(t):i.createElement(d,{key:t,value:e})}))}}]),t}();h.propTypes={className:t.string,value:t.oneOfType([t.string,t.number]),separate:t.string},h.defaultProps={value:0,className:"",separate:","},e.NumWheel=h,Object.defineProperty(e,"__esModule",{value:!0})});
